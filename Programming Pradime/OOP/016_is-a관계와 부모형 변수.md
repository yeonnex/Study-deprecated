ì´ ì½”ë“œê°€ ì»´íŒŒì¼ ë ê¹Œ? (ì‹¤ì²´ëŠ” í•™ìƒ)

```java
Student student = new Student("Leon", "Kim");
Person person = student;

Student actuallyStudent = person // ??
```

ì»´íŒŒì¼ ë˜ì§€ ì•ŠëŠ”ë‹¤. ì™œëƒ, Person íƒ€ì…ì„ Student íƒ€ì…ì— ë„£ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤... ì‹¤ì²´ëŠ” í•™ìƒì´ê¸´ í•˜ì§€ë§Œ,,,

## ë¶€ëª¨ë¥¼ ìì‹ì—ê²Œ ëŒ€ì…í•  ìˆ˜ ìˆê²Œ ë˜ë©´...

ì•„ë˜ì™€ ê°™ì€ ê²½ìš°ë–„ë¬¸ì— ë¶€ëª¨ë¥¼ ìì‹ì—ê²Œ ëŒ€ì…í•˜ëŠ” ê²ƒì„ ê¸ˆì§€ì‹œí‚¨ë‹¤.

```java
public static Student convertToStudent(Person person){
    Student student = person; // í•­ìƒ Student ê°œì²´ë§Œ ë“¤ì–´ì˜¤ë¦¬ë€ ë³´ì¥ì—†ìŒ... ê·¸ë˜ì„œ ë¶€ëª¨ì— ìì‹ ëŒ€ì…í•˜ëŠ” ê²Œ ì¼€ë°”ì¼€ì´ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ í•˜ë‚˜ë¡œ í†µì¼ì„ ìœ„í•´ ë¶€ëª¨ë¥¼ ìì‹ì— ëŒ€ì…í•˜ëŠ”ê±´ ì•„ì˜ˆ ì›ì²œ ê¸ˆì§€ì‹œí‚´
    return student;
}
```

```java
// ë‹¤ë¥¸ í•¨ìˆ˜ ì–´ë”˜ê°€
convertToStudent(student); // Student student
convertToStudent(teacher); // Teacher teacher
convertToStudent(partTime); // PartTimeTeacher partTime
```

- ë©”ì„œë“œ í˜¸ì¶œì€ í˜¸ì¶œìì˜ ë§ˆìŒ!
- Person ë° Personì˜ ìì‹ í´ë˜ìŠ¤ë“¤ì„ ëª¨ë‘ ì „ë‹¬í•  ìˆ˜ ìˆìŒ
- ì¦‰ ì‹¤í–‰ ì¤‘ì— ë°˜ë“œì‹œ **Student ê°œì²´ë§Œ ë“¤ì–´ì˜¨ë‹¤ëŠ” ë³´ì¥ì´ ì—†ìŒ**

`ë¶€ëª¨ <- ìì‹`ì€ ì•ˆì „

`ìì‹ <- ë¶€ëª¨`ëŠ” ì¼€ë°”ì¼€ ì´ê¸° ë•Œë¬¸ì— í•œê°€ì§€ë¡œ í†µì¼í•´ì£¼ê¸° ìœ„í•´ ì´ëŸ° ì½”ë“œëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ë§‰ì•„ì¤€ë‹¤.

```java
Student student = new Student("Leon", "Kim");
student.setMajor(Major.INFORAMTION_TECHNOLOGY);

Person person = student;
person.getMajorOrNull(); // ìì‹ì˜ ë©”ì„œë“œ í˜¸ì¶œ ë¶ˆê°€ëŠ¥. ì»´íŒŒì¼ ì•ˆë¨
```

## ìì‹ì„ ë¶€ëª¨ì— ëŒ€ì…í•˜ëŠ” ê±´ ì•”ì‹œì  ìºìŠ¤íŒ…

- `ë¶€ëª¨ <- ìì‹` ì€ ì‚¬ì‹¤ ìºìŠ¤íŒ…
- ì´ê±¸ ì»´íŒŒì¼ëŸ¬ê°€ ì•”ì‹œì (implicit)ìœ¼ë¡œ í•´ì¤€ ê²ƒì¼ ë¿

```java
Student student = new Student("Leon", "Kim");
Person person = (Person)student; // êµ³ì´ ëª…ì‹œì  ìºìŠ¤íŒ… í•´ì¤˜ë´¤ìŒ
```

- í•™ìƒì€ (ì—¬ì „íˆ ) ì‚¬ëŒì´ë‹¤ ğŸ˜Š

## ê·¸ ë°˜ëŒ€ ìºìŠ¤íŒ…ì€ ë°˜ë“œì‹œ ëª…ì‹œì ìœ¼ë¡œ!

- `ìì‹ <- ë¶€ëª¨` ëŠ” ëª…ì‹œì  ìºìŠ¤íŒ…ìœ¼ë¡œë§Œ ê°€ëŠ¥
- í”„ë¡œê·¸ë˜ë¨¸ê°€ '**ë‚´ê°€ ë­ í•˜ëŠ”ì§€ ì•Œì•„! ë‚  ë¯¿ê³  ì»´íŒŒì¼í•´ !**' ë¼ê³  ì§€ì‹œ

```java
Student student = new Student("Leon", "Kim");
Person person = student;

Student actuallyStudent = (Student)person; // ì›ë˜ëŠ” ëŒ€ì…ì´ ë˜ì§€ ì•Šì§€ë§Œ, í”„ë¡œê·¸ë˜ë¨¸ê°€ ëª…ì‹œì ìœ¼ë¡œ íƒ€ì…ë³€í™˜ì„ í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— ë¶€ëª¨ë¥¼ ìì‹ì— ëŒ€ì… ê°€ëŠ¥í•˜ë‹¤.
```

1. ë¶€ëª¨ë¥¼ ìì‹ìœ¼ë¡œ ìºìŠ¤íŒ… í›„ í˜¸ì¶œ
2. ì»´íŒŒì¼ ì˜ ë¨

## ì „í˜€ ìƒê´€ì—†ëŠ” í´ë˜ìŠ¤ë¡œ ìºìŠ¤íŒ…í•˜ë©´ ?

- ì»´íŒŒì¼ëŸ¬ê°€ ì¡ì•„ì¤Œ

```java
Teacher teacher = new Teacher("Severus", "Snape", Department.MAGIC);
Student student = (Student)teacher; // ì»´íŒŒì¼ ì—ëŸ¬. ì»´íŒŒì¼ëŸ¬ê°€ ì ì•„ì¤Œ
```

## ì •ë¦¬

Person ì€ Student ì¼ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì»´íŒŒì¼ëŸ¬ê°€ í—ˆìš©. ì‹¤í–‰ì¤‘ì— Student ê°€ ì•„ë‹ˆë¼ë©´ ë­.. ì˜ˆì™¸ê°€ í„°ì§€ê² ì§€ë§Œ... ì–´ì©„ë“  ì»´íŒŒì¼ì€ í•´ì¤Œ. ê·¸ëŸ°ë°, Teahcerê°€ Student ì¼ë¦¬ ì ˆëŒ€ ì—†ìœ¼ë‹ˆ í—ˆìš©ì•ˆí•¨. ì¦‰, í˜•ì œ ìë§¤ ê°„ì˜ ìºìŠ¤íŒ…ì€ í•  ìˆ˜ ì—†ìŒã„´

![image-20211220175343308](https://raw.githubusercontent.com/yeonnex/image-server/main/img/image-20211220175343308.png)

ìœ„ ì•„ë˜ë¡œ ìºìŠ¤íŒ…ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, ì¢Œìš°ë¡œ ìºìŠ¤íŒ…ì€ ì ˆëŒ€ ë¶ˆê°€.

ì»´íŒŒì¼ëŸ¬ëŠ” ìƒì† êµ¬ì¡°ìƒ ë§ì´ ì•ˆë˜ëŠ” ê²½ìš° ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë‚´ë¿œì–´ì¤Œ(= í”„ë¡œê·¸ë˜ë¨¸ì˜ ë©ì²­í•œ ì‹¤ìˆ˜ë¥¼ ì¡ì•„ì¤Œ)

ê·¸ëŸ¬ë‚˜ ì»´íŒŒì¼ëŸ¬ê°€ ëª»ì¡ì•„ì£¼ëŠ” ê²ƒë„ ìˆìŒ. ìƒì† êµ¬ì¡°ëŠ” ë§ì´ ë˜ë‚˜, ì‹¤ì œë¡œëŠ” ì•„ë‹Œ ë§ëŠ” ì ê²© íƒ€ì…ì´ ì•„ë‹Œ ê²½ìš°!

## ì»´íŒŒì¼ëŸ¬ê°€ ëª» ì¡ì•„ë‚´ëŠ” ê²½ìš°

```java
Person person = new Student("Leon", "Kim");
Teacher teacher = (Teacher)person;
```

ìƒì† êµ¬ì¡°ëŠ” ë§ì´ ë˜ì§€ë§Œ person ì˜ ì‹¤ì²´ëŠ” Student...

ì´ ê²½ìš° ì»´íŒŒì¼ì€ ì˜ ë˜ì§€ë§Œ, ì‹¤í–‰ì¤‘ì— ì—ëŸ¬ê°€ ë‚˜ê²Œ ëœë‹¤.

ì–´ë–»ê²Œ í•˜ë©´ ë ê¹Œ.....

ì˜ˆì™¸ë¥¼ í”¼í•  ìˆ˜ ìˆìœ¼ë©´ í”¼í•˜ëŠ” ê²Œ ì¢‹ì€ ìŠµê´€! ì˜ˆì™¸ì²˜ë¦¬ ì—†ì´ í•´ê²°í•˜ëŠ” ë²•ì„ ì•Œì•„ë³´ì. ë‹¨, ë‚˜ì¤‘ì— ë‹¤í˜•ì„±ì„ ë°°ìš°ê³  ë‚˜ë©´ ì´ë ‡ê²Œ í•  ê²½ìš°ê°€ ë³„ë¡œ ì—†ë‹¤! (ë‹¤í˜•ì„±ì„ ë°°ìš°ë©´ ìºìŠ¤íŒ…í•´ì•¼í•  ì¼ì´ ë³„ë¡œ ì—†ë‹¤)

## ìš°ë¦¬ê°€ ì‘ì„±í•˜ê³  ì‹¶ì€ ë¡œì§

```java
Person person = new Student("Leon", "Kim");
Teacher teacher = (Teacher) person;
```

1. ì´ person ê°œì²´ê°€ ì‹¤ì œ Teacher ì¸ì§€ í™•ì¸
2. ì‹¤ì œë¡œ Teacher ì¸ ê²½ìš°ì—ë§Œ Teacherë¡œ ìºìŠ¤íŒ… í•œë‹¤ìŒ ì›í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œ

**ê²°êµ­, ë¶€ëª¨í˜• ë³€ìˆ˜ì— ì €ì¥ëœ ë³€ìˆ˜ê°€ ì‹¤ì œ ì–´ë–¤ ìì‹í˜•ì¸ì§€ ì•Œ ë°©ë²•ì´ í•„ìš”**. *ê·¸ê²ƒë„ ì‹¤í–‰ì¤‘ì— !*

ì´ê±¸ **RTTI(Run Time Type Identification)** ê¸°ëŠ¥ì´ë¼ê³  í•¨. ì´ê±¸ `instaceof` ì—°ì‚°ìê°€ í•´ì¤€ë‹¤!

## instanceof ì—°ì‚°ì

```
<ë³€ìˆ˜ëª…> instanceof <í´ë˜ìŠ¤ëª…>
```

```java
Person person = new Student("Leon", "Kim");
System.out.println(person instanceof Student); // true ì¶œë ¥
System.out,println(person instanceof Teacher); // false ì¶œë ¥
```

- ê°œì²´ê°€ íŠ¹ì • í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ íŒë‹¨í•˜ëŠ” ì—°ì‚°ì
  - ë§ìœ¼ë©´ true ë°˜í™˜
  - í‹€ë¦¬ë©´ false ë°˜í™˜

ê·¸ëŸ¼ ë°©ê¸ˆ ì˜ˆì™¸ê°€ ë°œìƒí•œ ì½”ë“œì— instanceof ë¥¼ ì ìš©í•´ë³´ì

```java
Person person0 = new Student("Leon", "Kim");
Person person1 = new Teacher("Sally", "Park", Department.COMPUTER_SCIENCE);

Teacher teacher = null;

if (person0 instanceof Teacher){
    teacher = (Teacher)person0; // teacher: null
}
if (person1 instanceof Teacher){
    teacher = (Teacher)person1; // teacher: person1
}
```

ë”ì´ìƒ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ!

**ê·¸ëŸ°ë°, instanceof ì—°ì‚°ìëŠ” ë°˜ë“œì‹œ 'íŠ¹ì • í´ë˜ìŠ¤' ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ í™•ì¸í•˜ëŠ”ê²Œ ì•„ë‹ˆë‹¤.**

```java
Person person = new PartTimeTeacher("Jake", "Lee", Department.COMPUTER_SCIENCE, 10);

if (person instanceof PartTimeTeacher){
    System.out.println("I'm a part-time teacher!");
}
if (person instanceof Teacher){
    System.out.println("I'm a teacher");
}
```

ë‘˜ë‹¤ ì¶œë ¥ëœë‹¤. ì¦‰ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ Teacher ë¡œ ê²€ì‚¬í•´ë„ true



