흠 근데 결과적으로 다 `static` 으로 만드는 것과 같지 않음? 오히려 `static` 으로 만드는 것이 개체 생성도 안해서 더 좋아보임...

Configuration 예에서는 그렇다.

**근데, 두 방법(`static` vs `싱글턴`) 간에 차이점은 분명히 있다!**

둘 중 처한 상황에 맞게 선택해서 사용하면 되는데, 업계에서는 일반적으로 `싱글턴`을 사용한다고 함

## static 으로는 못하는 일

1. 다형성을 사용할 수 없다
2. 시그내처를 그대로 둔 채 멀티턴(multiton) 패턴으로 바꿀 수 없다(멀티턴패턴이란, 개체를 만들 수 있는 최소 개수를 정해두는 패턴이다. "개체 최소 5개까지 만들 수 있다" 이런식)
3. 개체의 생성 시점을 제어할 수 없다
   - Java 의 `static` 은 프로그램 실행시에 초기화됨
   - 반면 싱글턴의 경우, getInstance() 할 때 개체를 만듦 (프로그래머가 이걸 제어 가능)
   - 단, 싱글턴을 사용해도 제어에 어려움이 있음

싱글턴을 사용하는데 제어에 어려움이 어떻게 생긴다는거?

## 싱글턴 개체의 생성시기

- 처음으로 `getInstance()` 메서드가 호출될 때

- 하지만 보통 다양한 개체에서 `getInstance()` 를 호출함

  - 이게 무슨 의미일까?

    ```java
    // 프로그램 실행 중에 A,B,C 중 누가 제일 먼저 실행될까?
    // A, B, C 모두 싱글턴!
    class A{
        ...
        public static A getInstance(){
            ...
        }
        ...
    }
    class B{
        ...
        public static B getInstance(){
            ...
        }
        ...
    }
    class C{
        ...
        public static C getInstance(){
            ...
        }
        ...
    }
    ```

    개체들로 프로그램을 만들다보니, 프로그램 자체가 개체를 만들고, 그 개체가 다른 개체를 만들고, 또 다른 개체를 호출하고 등 복잡한 호출관계가 생긴다. 그래서 A가 먼저 호출될지, B가 먼저 호출될지 등의 순서를 알기 어렵다는 것이다. 

    **알기 어렵지만, 보통 큰 문제는 아니다.**

    단 A가 먼저 호출된든, B가 먼저 호출되든지 문제가 없는 경우는 둘 간에 종속관계가 없을때이긴하다. 즉 독자적으로 활동가능할때는 문제가 되지 않는다.

    그러나 **때에 따라 문제**가 될 수 있는데, 특히 외부 API 를 사용할 떄. 이는 어떤게 먼저 만들어지고, 그 다음에 다른걸 만든다 이런 과정이 있기 때문. 이 경우 초기화 순서를 보장하는 방법이 있다.

## 초기화 순서를 보장하는 법

- 초기화 순서를 보장하기 위해 실무에서 이런 일을 하기도 함

- 프로그램 시작 시 여러 싱글턴의 `getInstance()`를 순서대로 호출 (메인함수 등에서 호출!)

- 예 : B > C > A 순으로 초기화해야 하는 경우

  ```java
  // 싱글턴을 정해진 순서대로 초기화
  
  // C를 사용하기 위해서는 B가 먼저 만들어져 있어야 하는 경우
  // A를 사용하기 위해 C가 먼저 만들어져있어야 하는 ㄱ
  B.getInstance();
  C.getInstance();
  A.getInstance();
  ```

  





